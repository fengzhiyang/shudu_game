{"version":3,"sources":["webpack:///webpack/bootstrap 238f36b40ef73894fcca","webpack:///external \"jQuery\"","webpack:///./ts/core/toolkit.ts","webpack:///./ts/index.ts","webpack:///./ts/ui/Grid.ts","webpack:///./ts/core/Sudoku.ts","webpack:///./ts/core/Generator.ts","webpack:///./ts/core/checker.ts","webpack:///./ts/ui/Popup.ts"],"names":["Object","defineProperty","exports","value","BoxToolkit","matrix","boxIndex","startRowIndex","Math","floor","startColIndex","result","i","rowIndex","colIndex","push","cellIndex","boxToolkit","MatrixToolkit","Array","from","length","makeRow","array","fill","endIndex","j","random","n","boxCoor","convertToBoxIndex","boxCells","getBoxCells","matrixToolkit","Toolkit","box","default","Grid_1","require","Popup_1","main","$container","$","$popup","grid","bindPopup","rebuild","on","check","alert","reset","clear","window","layout","Sudoku_1","checker_1","Grid","container","_$container","sudoku","Sudo","make","rowGroupClasses","colGroupClasses","_cells","map","rowValues","cellValue","text","addClass","rows","rowCells","append","empty","width","height","css","popupNumbers","$cell","e","target","hasClass","popup","data","parseInt","$span","checker","success","marks","forEach","removeClass","Generator_1","level","_puzzleMatrix","_matrix","row","v","_generator","generate","toolkit_1","Generator","orders","internalGenerate","console","warn","x","shuffle","every","fillNumber","number","fillRow","checkFillable","Checker","filter","index","checkRows","checkCols","checkBoxes","_success","rowMarks","_checkArray","cols","colMarks","boxes","boxMarks","convertFromBoxIndex","BLOCK_WIDTH","OFFSET","POPUP_WIDTH","Popup","$div","_$panel","emptyTarget","markTarget","setTargetValue","hide","_$targetCell","marker","$target","cellPosition","position","left","min","max","top","show"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 238f36b40ef73894fcca","module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = 0","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// 宫坐标工具箱\r\nclass BoxToolkit {\r\n    // 根据给定的宫号(从0开始)获取一个数组，\r\n    // 这个数组按先行后列从左到右的顺序包含宫内每个元素的值\r\n    getBoxCells(matrix, boxIndex) {\r\n        const startRowIndex = Math.floor(boxIndex / 3) * 3;\r\n        const startColIndex = boxIndex % 3 * 3;\r\n        const result = [];\r\n        for (let i = 0; i < 9; i++) {\r\n            const rowIndex = startRowIndex + Math.floor(i / 3);\r\n            const colIndex = startColIndex + i % 3;\r\n            result.push(matrix[rowIndex][colIndex]);\r\n        }\r\n        return result;\r\n    }\r\n    // 从宫坐标转换为矩阵坐标\r\n    convertFromBoxIndex(boxIndex, cellIndex) {\r\n        return {\r\n            rowIndex: Math.floor(boxIndex / 3) * 3 + Math.floor(cellIndex / 3),\r\n            colIndex: boxIndex % 3 * 3 + cellIndex % 3\r\n        };\r\n    }\r\n    // 从矩阵坐标转换为宫坐标\r\n    convertToBoxIndex(rowIndex, colIndex) {\r\n        return {\r\n            boxIndex: Math.floor(rowIndex / 3) * 3 + Math.floor(colIndex / 3),\r\n            cellIndex: rowIndex % 3 * 3 + colIndex % 3\r\n        };\r\n    }\r\n}\r\n;\r\nconst boxToolkit = new BoxToolkit();\r\n// 矩阵工具箱\r\nclass MatrixToolkit {\r\n    make(value = 0) {\r\n        return Array.from({ length: 9 }, () => this.makeRow(value));\r\n    }\r\n    makeRow(value = 0) {\r\n        const array = new Array(9);\r\n        array.fill(value);\r\n        return array;\r\n    }\r\n    // Fisher-Yates 洗牌算法，Lodash 中有实现\r\n    // 传入一个数组，对数组元素洗牌之后，再将其返回\r\n    shuffle(array) {\r\n        const length = array.length;\r\n        const endIndex = length - 1;\r\n        for (let i = 0; i < endIndex; i++) {\r\n            const j = i + Math.floor(Math.random() * (length - i));\r\n            [array[i], array[j]] = [array[j], array[i]];\r\n        }\r\n        return array;\r\n    }\r\n    // 检查某个位置是否可以填入 n\r\n    checkFillable(matrix, n, rowIndex, colIndex) {\r\n        const boxCoor = boxToolkit.convertToBoxIndex(rowIndex, colIndex);\r\n        const boxCells = boxToolkit.getBoxCells(matrix, boxCoor.boxIndex);\r\n        for (let i = 0; i < 9; i++) {\r\n            if (matrix[i][colIndex] === n\r\n                || matrix[rowIndex][i] === n\r\n                || boxCells[i] === n) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\n;\r\nconst matrixToolkit = new MatrixToolkit();\r\nconst Toolkit = {\r\n    get matrix() {\r\n        return matrixToolkit;\r\n    },\r\n    get box() {\r\n        return boxToolkit;\r\n    }\r\n};\r\nexports.default = Toolkit;\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/core/toolkit.ts","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Grid_1 = require(\"./ui/Grid\");\r\nconst Popup_1 = require(\"./ui/Popup\");\r\nfunction main() {\r\n    const $container = $(\"#container\");\r\n    const $popup = $(\"#popup\");\r\n    const grid = new Grid_1.default($container);\r\n    grid.bindPopup(new Popup_1.default($popup));\r\n    grid.rebuild();\r\n    $(\"#check\").on(\"click\", () => {\r\n        if (grid.check()) {\r\n            alert(\"成功\");\r\n        }\r\n    });\r\n    $(\"#reset\").on(\"click\", () => grid.reset());\r\n    $(\"#clear\").on(\"click\", () => grid.clear());\r\n    $(\"#rebuild\").on(\"click\", () => grid.rebuild());\r\n    $(window).on(\"resize\", () => grid.layout());\r\n}\r\nmain();\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/index.ts","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Sudoku_1 = require(\"../core/Sudoku\");\r\nconst checker_1 = require(\"../core/checker\");\r\nclass Grid {\r\n    constructor(container) {\r\n        this._$container = container;\r\n    }\r\n    rebuild() {\r\n        const sudoku = new Sudoku_1.Sudo();\r\n        const matrix = sudoku.make();\r\n        const rowGroupClasses = [\"row_g_top\", \"row_g_middle\", \"row_g_bottom\"];\r\n        const colGroupClasses = [\"col_g_left\", \"col_g_center\", \"col_g_right\"];\r\n        // 创建矩阵数组对应的 span 二维数组\r\n        this._cells = matrix.map(rowValues => rowValues.map((cellValue, colIndex) => {\r\n            return $(\"<span>\")\r\n                .text(cellValue)\r\n                .addClass(cellValue ? \"fixed\" : \"empty\")\r\n                .addClass(colGroupClasses[colIndex % 3]);\r\n        }));\r\n        // 创建 DOM\r\n        const rows = this._cells.map((rowCells, rowIndex) => {\r\n            return $(\"<div>\")\r\n                .addClass(\"row\")\r\n                .addClass(rowGroupClasses[rowIndex % 3])\r\n                .append(rowCells);\r\n        });\r\n        this._$container.empty().append(rows);\r\n        this.layout();\r\n    }\r\n    layout() {\r\n        const width = $(\"span:first\", this._$container).width();\r\n        $(\"span\", this._$container)\r\n            .height(width)\r\n            .css({\r\n            \"line-height\": `${width}px`,\r\n            \"font-size\": width < 32 ? `${width / 2}px` : \"\"\r\n        });\r\n    }\r\n    bindPopup(popupNumbers) {\r\n        this._$container.on(\"click\", \"span\", e => {\r\n            const $cell = $(e.target);\r\n            if ($cell.hasClass(\"fixed\")) {\r\n                return;\r\n            }\r\n            popupNumbers.popup($cell);\r\n        });\r\n    }\r\n    check() {\r\n        const data = this._cells\r\n            .map(rowCells => rowCells\r\n            .map($span => parseInt($span.text(), 10)));\r\n        const checker = new checker_1.default(data).check();\r\n        if (checker.success) {\r\n            return true;\r\n        }\r\n        const marks = checker.marks;\r\n        this._cells.forEach((rowCells, rowIndex) => rowCells.forEach(($span, colIndex) => {\r\n            // 所有预置的数字都不标记\r\n            if ($span.hasClass(\"fixed\")) {\r\n                return;\r\n            }\r\n            if (marks[rowIndex][colIndex]) {\r\n                $span.removeClass(\"error\");\r\n            }\r\n            else {\r\n                $span.addClass(\"error\");\r\n            }\r\n        }));\r\n        return false;\r\n    }\r\n    reset() {\r\n        $(\"span:not(.fixed)\", this._$container)\r\n            .text(\"0\")\r\n            .removeClass(\"mark1 mark2 error\")\r\n            .addClass(\"empty\");\r\n    }\r\n    clear() {\r\n        $(\"span.error\", this._$container).removeClass(\"error\");\r\n    }\r\n}\r\nexports.default = Grid;\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/ui/Grid.ts","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Generator_1 = require(\"./Generator\");\r\nclass Sudo {\r\n    constructor() {\r\n        this.make = (level = 5) => {\r\n            this._puzzleMatrix = this._matrix.map(row => {\r\n                return row.map(v => Math.random() * 9 < level ? 0 : v);\r\n            });\r\n            return this._puzzleMatrix;\r\n        };\r\n        this._generator = new Generator_1.default();\r\n        this._matrix = this._generator.generate();\r\n        this._puzzleMatrix = new Array();\r\n    }\r\n}\r\nexports.Sudo = Sudo;\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/core/Sudoku.ts","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst toolkit_1 = require(\"./toolkit\");\r\nclass Generator {\r\n    constructor() {\r\n        this.matrix = new Array();\r\n        this.orders = new Array();\r\n    }\r\n    generate() {\r\n        while (!this.internalGenerate()) {\r\n            console.warn(\"rebuild\");\r\n        }\r\n        return this.matrix;\r\n    }\r\n    internalGenerate() {\r\n        this.matrix = toolkit_1.default.matrix.make();\r\n        this.orders = Array.from({ length: 9 })\r\n            .map(() => Array.from({ length: 9 }, (x, i) => i))\r\n            .map(row => toolkit_1.default.matrix.shuffle(row));\r\n        return Array.from({ length: 9 })\r\n            .every((n, i) => this.fillNumber(i + 1));\r\n    }\r\n    fillNumber(number) {\r\n        return this.fillRow(number, 0);\r\n    }\r\n    fillRow(n, rowIndex) {\r\n        if (rowIndex >= 9) {\r\n            return true;\r\n        }\r\n        const row = this.matrix[rowIndex];\r\n        const orders = this.orders[rowIndex];\r\n        for (let i = 0; i < orders.length; i++) {\r\n            const colIndex = orders[i];\r\n            // 如果这个位置已经有值，跳过\r\n            if (row[colIndex]) {\r\n                continue;\r\n            }\r\n            // 检查这个位置是否可以填入 n，如果不能填，忽略\r\n            if (!toolkit_1.default.matrix.checkFillable(this.matrix, n, rowIndex, colIndex)) {\r\n                continue;\r\n            }\r\n            row[colIndex] = n;\r\n            // 去下一行填 n，如果没填进去，就回退\r\n            if (!this.fillRow(n, rowIndex + 1)) {\r\n                row[colIndex] = 0;\r\n                continue;\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n}\r\nexports.default = Generator;\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/core/Generator.ts","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst toolkit_1 = require(\"./toolkit\");\r\nclass Checker {\r\n    static _checkArray(array) {\r\n        const marks = new Array(array.length);\r\n        marks.fill(true);\r\n        array.forEach((v, i) => {\r\n            if (!v) {\r\n                marks[i] = false;\r\n                return;\r\n            }\r\n            if (marks[i]) {\r\n                for (let j = i + 1; j < 9; j++) {\r\n                    if (v === array[j]) {\r\n                        marks[i] = false;\r\n                        marks[j] = false;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        return marks\r\n            .map((v, i) => v ? -1 : i)\r\n            .filter(index => index >= 0);\r\n    }\r\n    constructor(matrix) {\r\n        this.matrix = matrix;\r\n    }\r\n    check() {\r\n        this.marks = toolkit_1.default.matrix.make(true);\r\n        this.checkRows();\r\n        this.checkCols();\r\n        this.checkBoxes();\r\n        this._success = this.marks.every(row => row.every(v => v));\r\n        return this;\r\n    }\r\n    get success() {\r\n        return this._success;\r\n    }\r\n    checkRows() {\r\n        const marks = this.marks;\r\n        this.matrix.forEach((row, rowIndex) => {\r\n            const rowMarks = Checker._checkArray(row);\r\n            rowMarks.forEach(colIndex => {\r\n                marks[rowIndex][colIndex] = false;\r\n            });\r\n        });\r\n    }\r\n    checkCols() {\r\n        const { matrix, marks } = this;\r\n        for (let colIndex = 0; colIndex < 9; colIndex++) {\r\n            const cols = Array.from({ length: 9 })\r\n                .map((v, i) => matrix[i][colIndex]);\r\n            const colMarks = Checker._checkArray(cols);\r\n            colMarks.forEach(rowIndex => marks[rowIndex][colIndex] = false);\r\n        }\r\n    }\r\n    checkBoxes() {\r\n        const { matrix, marks } = this;\r\n        const boxes = Array.from({ length: 9 })\r\n            .map((v, i) => toolkit_1.default.box.getBoxCells(matrix, i));\r\n        boxes.forEach((box, boxIndex) => {\r\n            const boxMarks = Checker._checkArray(box);\r\n            boxMarks.forEach(cellIndex => {\r\n                const { rowIndex, colIndex } = toolkit_1.default.box.convertFromBoxIndex(boxIndex, cellIndex);\r\n                marks[rowIndex][colIndex] = false;\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.default = Checker;\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/core/checker.ts","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst BLOCK_WIDTH = 48; // 这是在样式表中固定的大小\r\nconst OFFSET = BLOCK_WIDTH + 2;\r\nconst POPUP_WIDTH = BLOCK_WIDTH * 3 + 10;\r\nclass Popup {\r\n    constructor($div) {\r\n        this._$panel = $div;\r\n        this._$panel\r\n            .on(\"click\", \"span\", e => {\r\n            const $cell = $(e.target);\r\n            if ($cell.hasClass(\"empty\")) {\r\n                this.emptyTarget();\r\n            }\r\n            else if ($cell.hasClass(\"mark\")) {\r\n                this.markTarget($cell.data(\"mark\"));\r\n            }\r\n            else {\r\n                this.setTargetValue($cell.text());\r\n            }\r\n            this._$panel.hide();\r\n            this._$targetCell = null;\r\n        })\r\n            .hide()\r\n            .removeClass(\"hidden\");\r\n    }\r\n    emptyTarget() {\r\n        this._$targetCell\r\n            .text(\"0\")\r\n            .removeClass(\"mark1 mark2 error\")\r\n            .addClass(\"empty\");\r\n    }\r\n    markTarget(marker) {\r\n        const $target = this._$targetCell;\r\n        if ($target.hasClass(marker)) {\r\n            $target.removeClass(\"mark1 mark2 error\");\r\n        }\r\n        else {\r\n            $target.removeClass(\"mark1 mark2 error\").addClass(marker);\r\n        }\r\n    }\r\n    setTargetValue(value) {\r\n        this._$targetCell\r\n            .text(value)\r\n            .removeClass(\"empty error\");\r\n    }\r\n    /**\r\n     * 基于 $cell 指定的方格弹出数字面板，选择的数字将回填到 $cell\r\n     */\r\n    popup($cell) {\r\n        this._$targetCell = $cell;\r\n        const cellPosition = $cell.position();\r\n        const left = Math.min(Math.max(cellPosition.left - OFFSET, 0), $(window).width() - POPUP_WIDTH);\r\n        const top = Math.max(cellPosition.top - OFFSET, 0);\r\n        this._$panel\r\n            .css({\r\n            left: `${left}px`,\r\n            top: `${top}px`\r\n        })\r\n            .show();\r\n    }\r\n}\r\nexports.default = Popup;\r\n\n\n\n// WEBPACK FOOTER //\n// ./ts/ui/Popup.ts"],"sourceRoot":""}